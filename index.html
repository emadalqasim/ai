<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Ù…Ø³Ø§Ø¹Ø¯ Ø­Ø¨ÙŠØ¨ÙŠ</title>
	<link href="https://cdn.jsdelivr.net/npm/@n8n/chat/dist/style.css" rel="stylesheet" />
	<style>
		body {
			margin: 0;
			font-family: 'Tajawal', sans-serif;
			background-color: #f7f8fa;
			display: flex;
			flex-direction: column;
			height: 100vh;
		}

		.chat-container {
			flex: 1;
			display: flex;
			flex-direction: column;
			max-width: 900px;
			margin: 0 auto;
			background: #fff;
			border-radius: 12px;
			box-shadow: 0 4px 20px rgba(0,0,0,0.05);
			overflow: hidden;
		}

		.chat-header {
			padding: 16px 20px;
			background-color: #f1f3f6;
			border-bottom: 1px solid #e0e0e0;
			font-weight: 600;
			color: #333;
			font-size: 1.1rem;
			text-align: center;
		}

		.chat-messages {
			flex: 1;
			padding: 20px;
			overflow-y: auto;
			display: flex;
			flex-direction: column;
			gap: 10px;
		}

		.message {
			max-width: 75%;
			padding: 12px 16px;
			border-radius: 10px;
			line-height: 1.5;
			font-size: 0.95rem;
			word-wrap: break-word;
		}

		.bot {
			background-color: #f2f4f8;
			align-self: flex-start;
			color: #333;
		}

		.user {
			background-color: #0078ff;
			color: #fff;
			align-self: flex-end;
		}

		.chat-input {
			display: flex;
			align-items: center;
			padding: 15px;
			background: #f9fafb;
			border-top: 1px solid #e0e0e0;
		}

		.chat-input input {
			flex: 1;
			padding: 12px 15px;
			border: 1px solid #ccc;
			border-radius: 8px;
			outline: none;
			font-size: 0.95rem;
		}

		.chat-input button {
			margin-right: 10px;
			padding: 12px 20px;
			border: none;
			background-color: #0078ff;
			color: #fff;
			font-weight: 600;
			border-radius: 8px;
			cursor: pointer;
			transition: background 0.2s ease-in-out;
		}

		.chat-input button:hover {
			background-color: #005fd1;
		}
	</style>
</head>
<body>

	<div class="chat-container">
		<div class="chat-header">Ù…Ø³Ø§Ø¹Ø¯ Ø­Ø¨ÙŠØ¨ÙŠ ğŸ¤–</div>
		<div class="chat-messages" id="chatMessages">
			<div class="message bot">Ù…Ø±Ø­Ø¨Ù‹Ø§! ÙƒÙŠÙ Ø£Ù‚Ø¯Ø± Ø£Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„ÙŠÙˆÙ…ØŸ</div>
		</div>

		<div class="chat-input">
			<input id="userInput" type="text" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..." />
			<button id="sendBtn">Ø¥Ø±Ø³Ø§Ù„</button>
		</div>
	</div>

	<script>
		const webhookUrl = "https://n8n.srv984382.hstgr.cloud/webhook/596cf419-d403-4008-bc7e-0a13cd97ac08/chat";

		const messagesContainer = document.getElementById("chatMessages");
		const userInput = document.getElementById("userInput");
		const sendBtn = document.getElementById("sendBtn");

		async function sendMessage() {
			const text = userInput.value.trim();
			if (!text) return;

			appendMessage(text, "user");
			userInput.value = "";

			try {
				const response = await fetch(webhookUrl, {
					method: "POST",
					headers: { "Content-Type": "application/json" },
					body: JSON.stringify({ message: text })
				});

				const data = await response.json();
				const reply = data?.response || data?.message || "Ù„Ù… ÙŠØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø±Ø¯ Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù….";
				appendMessage(reply, "bot");
			} catch (error) {
				appendMessage("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù†Ø¸Ø§Ù….", "bot");
			}
		}

		function appendMessage(text, sender) {
			const msg = document.createElement("div");
			msg.classList.add("message", sender);
			msg.textContent = text;
			messagesContainer.appendChild(msg);
			messagesContainer.scrollTop = messagesContainer.scrollHeight;
		}

		sendBtn.addEventListener("click", sendMessage);
		userInput.addEventListener("keypress", (e) => {
			if (e.key === "Enter") sendMessage();
		});
	</script>
</body>
</html>
